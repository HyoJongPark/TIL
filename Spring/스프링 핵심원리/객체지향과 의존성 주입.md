# ê°ì²´ì§€í–¥ê³¼ ì˜ì¡´ì„± ì£¼ì…

## ë¹„ì§€ë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

- íšŒì›
    - íšŒì› ê°€ì…, ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆë‹¤.
    - íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë“±ê¸‰ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
    - íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ë„ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ë„ ìˆë‹¤.(ë¯¸ì •)
- ì£¼ë¬¸ í• ì¸ê³¼ ì •ì±…
    - íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
    - íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
    - í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ì•¼í•¨.(ì´í›„ ë³€ê²½ê°€ëŠ¥)
    - í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.

---

## V1

## íšŒì› ë„ë©”ì¸ í˜‘ë ¥ê´€ê³„

![Untitled](https://user-images.githubusercontent.com/75190035/150498314-28d8f704-2119-452c-80a5-c1bfcba993e2.png)

- íšŒì› ì €ì¥ë°©ì‹ì€ ë¯¸ì •, ë”°ë¼ì„œ ì—¬ëŸ¬ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

## íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 1](https://user-images.githubusercontent.com/75190035/150498351-4a9371be-d647-4ce3-bb84-56b697121294.png)

## íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 2](https://user-images.githubusercontent.com/75190035/150498399-36fc4291-574c-4e27-9c69-1ffd35c337fd.png)

- íšŒì› ì„œë¹„ìŠ¤: MemberServiceImpl

```java
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- ìœ„ ê¸°ëŠ¥ì—ì„œ ë©¤ë²„ì„œë¹„ìŠ¤ì˜ êµ¬í˜„ì²´ëŠ” ë©¤ë²„ ì €ì¥ì†Œì˜ ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œì•„ë‹ˆë¼ êµ¬í˜„ì²´ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤. ë”°ë¼ì„œ OCP, DIPë¥¼ ìœ„ë°˜í•˜ê³  ìˆë‹¤.

## ì£¼ë¬¸ ë„ë©”ì¸

![Untitled 3](https://user-images.githubusercontent.com/75190035/150498469-9f5bb307-f060-464a-b1d9-d64feb35f99b.png)

1. ì£¼ë¬¸ ìƒì„±: í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­í•œë‹¤.
2. íšŒì› ì¡°íšŒ: í• ì¸ì„ ìœ„í•´ì„œëŠ” íšŒì› ë“±ê¸‰ì´ í•„ìš”í•˜ë‹¤. ê·¸ë˜ì„œ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„
ì¡°íšŒí•œë‹¤.
3. í• ì¸ ì ìš©: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„í•œë‹¤.
4. ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

## ì£¼ë¬¸ ë„ë©”ì¸ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 4](https://user-images.githubusercontent.com/75190035/150498519-28bfec8e-1f5d-4a28-8e3c-268da7953f3c.png)
 

## ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 5](https://user-images.githubusercontent.com/75190035/150498551-380752ef-cefb-4b9f-b515-76054a1b4c08.png)

![Untitled 6](https://user-images.githubusercontent.com/75190035/150498582-daf89549-8d67-4ff1-abac-6ecb9847ce61.png)

ì´ë²ˆ ì˜ˆì œ ì—ì„œëŠ” ìë°” ì½”ë“œë¡œ ë‹¨ìˆœíˆ ìœ„ ë‹¤ì´ì–´ê·¸ë¨ ê´€ê³„ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒ ì´ì—ˆìŒ.

ëª‡ ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí•  ë¶€ë¶„ì„ ë‹¤ìŒì—ì„œ ìˆ˜ì •.

### ë¬¸ì œì 

- ì •ì•¡í• ì¸ì—ì„œ ì •ë¥ í• ì¸ìœ¼ë¡œ í• ì¸ ì •ì±…ì„ ë³€ê²½í• ë•Œ OrderServiceImplì˜ ì½”ë“œê°€ ìˆ˜ì •ëœë‹¤.
- ì¶”ìƒ í´ë˜ìŠ¤ì— ë§Œ ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, êµ¬ì²´ í´ë˜ìŠ¤ì—ë„ ì˜ì¡´í•œ ê²°ê³¼
- ì´ëŠ” DIP, OCP ë¥¼ ìœ„ë°˜í•œ ê²ƒì´ë‹¤.

---

## V2 (AppConfigë„ì…)

```java
public class OrderServiceImpl implements OrderService {
// private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
 private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

- ìœ„ ì½”ë“œì²˜ëŸ¼ ì •ì•¡í• ì¸ì—ì„œ ì •ë¥ í• ì¸ìœ¼ë¡œ í• ì¸ ì •ì±…ì„ ë³€ê²½í• ë•Œ OrderServiceImplì˜ ì½”ë“œê°€ ìˆ˜ì •ëœë‹¤.
- ì´ëŠ” DIP, OCPë¥¼ ìœ„ë°˜í•œ ê²ƒì´ë‹¤.

```java
public class OrderServiceImpl implements OrderService {
 //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
 private DiscountPolicy discountPolicy;
}
```

- ìœ„ ì²˜ëŸ¼ ì¶”ìƒ í´ë˜ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë•ŒëŠ” NullPointExceptionì´ ë°œìƒí•œë‹¤.

â†’ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

## ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì

- ì§€ê¸ˆì˜ ì½”ë“œëŠ” ì—°ê·¹ìœ¼ë¡œ ë¹„ìœ í•˜ë©´, ë°°ìš°ê°€ ê³µì—°ë„ í•˜ëŠ” ë™ì‹œì— ì£¼ì¸ê³µë„ ì§ì ‘ ì„ íƒí•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.
- ì´ëŠ” í•œ ê°ì²´ê°€ ì—¬ëŸ¬ ì±…ì„ì„ ê°€ì§€ëŠ” ê²ƒì„ â†’ SRP ìœ„ë°˜ìœ¼ë¡œ ì½”ë“œì˜ ìˆ˜ì • â†’ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ê°€ í•„ìš”í•¨

### AppConfig

êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , â€œì—°ê²°â€í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” í´ë˜ìŠ¤

```java
public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}
```

- AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±
- ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ë¥¼ ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…í•´ì¤€ë‹¤.

```java
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
...
}
```

```java
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
...
}
```

- ìˆ˜ì •ëœ ì½”ë“œì—ì„œ
    - `private final MemberRepository memberRepository = new MemoryMemberRepository();`
        
        â†’  `private final MemberRepository memberRepository;`
        
    - ìœ„ì™€ ê°™ì´ ë”ì´ìƒ êµ¬í˜„ ê°ì²´ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì–´ë–¤ êµ¬í˜„ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •í•˜ê³  ì‹¤í–‰ë§Œì— ì§‘ì¤‘í•œë‹¤.
- í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 7](https://user-images.githubusercontent.com/75190035/150498610-f1326df4-f8f9-455d-95e4-d5b11632edeb.png)

- ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Untitled 8](https://user-images.githubusercontent.com/75190035/150498632-0ff07fdd-4834-4d42-a9a6-a080cb772002.png)

- appConfig ê°ì²´ëŠ” êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImplì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ
DI(Dependency Injection) ìš°ë¦¬ë§ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë˜ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤.

```java
public class OrderApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
//        MemberService memberService = new MemberServiceImpl();
//        OrderService orderService = new OrderServiceImpl();
        MemberService memberService = appConfig.memberService();
        OrderService orderService = appConfig.orderService();
				...
    }
}
```

- ì‚¬ìš© í´ë˜ìŠ¤ì—ì„œë„ AppConfigë¥¼ í†µí•´ì„œ ìƒì„±ëœ êµ¬í˜„ê°ì²´ë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤.

![Untitled 9](https://user-images.githubusercontent.com/75190035/150498651-4f91a2ba-600a-49c4-b9bc-de29b6b2a26a.png)

- ì´ì œ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ê³  í•´ë„ êµ¬ì„± ì˜ì—­ì˜ ì½”ë“œ ì´ì™¸ì—ëŠ” ì–´ë–¤ ì½”ë“œë„ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ë‹¤.
- DIP, OCP,SRP ë¥¼ ì§€í‚¬ ìˆ˜ ìˆê²Œ ë¨

<aside>
ğŸ’¡ AppConfig ë¼ëŠ” êµ¬í˜„ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„ì…ìœ¼ë¡œ SRP(ë‹¨ì¼ ì±…ì„ ì›ì¹™), DIP(ì˜ì¡´ê´€ê³„ ì—­ì²œ ì›ì¹™), OCP(ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤) 3ê°€ì§€ì˜ SOLID ì›ì¹™ì„ ì§€í‚¤ë„ë¡ ì„¤ê³„í•  ìˆ˜ ìˆì—ˆë‹¤.

</aside>

<aside>
ğŸ’¡ AppConfig ë¼ëŠ” êµ¬í˜„ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„ì…ìœ¼ë¡œ SRP(ë‹¨ì¼ ì±…ì„ ì›ì¹™), DIP(ì˜ì¡´ê´€ê³„ ì—­ì²œ ì›ì¹™), OCP(ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤) 3ê°€ì§€ì˜ SOLID ì›ì¹™ì„ ì§€í‚¤ë„ë¡ ì„¤ê³„í•  ìˆ˜ ìˆì—ˆë‹¤.

</aside>

---

## IoC, DI, ì»¨í…Œì´ë„ˆ

- **ì œì–´ì˜ ì—­ì „ IoC**
    - ì´ì œ í”„ë¡œê·¸ë¨ì€ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±, ì—°ê²°, ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ â€œìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• â€ ë§Œ ë‹´ë‹¹í•œë‹¤.
    - ì´ì „ì—ëŠ” êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢… í–ˆë‹¤ë©´, ì´ì œëŠ” AppConfig ê°€ ì œì–´ì˜ íë¦„ì„ ê°€ì ¸ê°„ë‹¤.
    - ì´ì²˜ëŸ¼ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ë¼ê³  í•œë‹¤.

> í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬                                                                                                                                         í”„ë ˆì„ì›Œí¬ê°€ ë‚´ê°€ ì¥ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ë§ë‹¤.(JUnit)                          ë°˜ë©´ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´, ê·¸ê²ƒì€ ë¼ì´ë¸ŒëŸ¬ë¦¬.
> 

- **ì˜ì¡´ ê´€ê³„ ì£¼ì…**
    - OrderServiceImpl ì€ DiscountPolicy ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ë©°, ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ê°ì²´ê°€ ì‚¬ìš©ë ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.
    - ì˜ì¡´ê´€ê³„ëŠ” ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€ ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„ ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼ í•œë‹¤.
        
        

<aside>
ğŸ“Œ **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„**                                                                                                                    í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” import ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.  ì •ì ì¸ ì˜ì¡´ ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ ì´ë¯¸ì§€ ì²˜ëŸ¼ í´ë˜ìŠ¤ë“¤ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì„ **ì •ì ì¸ ì˜ì¡´ê´€ê³„**ë¼ê³  í•˜ê³ , ì´ëŸ¬í•œ ì˜ì¡´ê´€ê³„ ë§Œìœ¼ë¡œëŠ” ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ê°ì²´ê°€ ì£¼ì…ë  ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.

![Untitled 10](https://user-images.githubusercontent.com/75190035/150498694-3b98de0b-5e64-4098-9bb0-4f7d82df01de.png)
  
</aside>

<aside>
ğŸ“Œ **ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„                                                                                                                       â€˜**ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì â€™ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ê°ì²´ë¥¼ ìƒì„±, í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒì„ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë¼ê³  í•œë‹¤.

ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì˜ ë³€ê²½ ì—†ì´ êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê³ , ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½ í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

![Untitled 11](https://user-images.githubusercontent.com/75190035/150498721-2e35b82d-d493-4be7-aa4d-c6f881eb705a.png)
  
</aside>

- IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ
    - AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ, ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒì„ IoCì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ ë¼ê³  í•¨

---

## V3 (Springì‚¬ìš©)

```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}
```

```java
public class OrderApp {
    public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();
//        OrderService orderService = appConfig.orderService();
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        OrderService orderService = ac.getBean("orderService", OrderService.class);
        
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);
        Order order = orderService.createOrder(memberId, "itemA", 20000);
        System.out.println("order = " + order);
    }
}
```

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
    - ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤.
    - ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ AppConfigë¥¼ ì‚¬ìš©í•´ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DI ë¥¼ í–ˆì§€ë§Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê·¸ ì—­í• ì„ ëŒ€ì‹ í•¨.
        - ê°œë°œìëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆ ìœ¼ë¡œ ë“±ë¡, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆ ì„ ì°¾ì•„ì„œ ì‚¬ìš©í•œë‹¤.
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” â€˜`@Configuration`â€™ ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì„¤ì •(êµ¬ì„±)ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.
    - ì—¬ê¸°ì„œ â€˜`@Bean`â€™ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆ ì´ë¼ê³  í•œë‹¤.
    - ìŠ¤í”„ë§ ë¹ˆ ì€ â€˜@Beanâ€™ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
        - ì‚¬ìš©ì€ â€˜`ac.getBean(â€nameâ€, class)`í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©
    
![ë¹ˆ ìœ¼ë¡œ ë“±ë¡ëœ ë©”ì„œë“œ(ì´ë¦„ì´ ë©”ì„œë“œ ëª…ê³¼ ë™ì¼í•˜ë‹¤)](https://user-images.githubusercontent.com/75190035/150498762-02a58f8b-e4df-4896-96c9-241668a4dde8.png)

ë¹ˆ ìœ¼ë¡œ ë“±ë¡ëœ ë©”ì„œë“œ(ì´ë¦„ì´ ë©”ì„œë“œ ëª…ê³¼ ë™ì¼í•˜ë‹¤)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
    - ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤.
    - ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ AppConfigë¥¼ ì‚¬ìš©í•´ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DI ë¥¼ í–ˆì§€ë§Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê·¸ ì—­í• ì„ ëŒ€ì‹ í•¨.
        - ê°œë°œìëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆ ìœ¼ë¡œ ë“±ë¡, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆ ì„ ì°¾ì•„ì„œ ì‚¬ìš©í•œë‹¤.
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” â€˜`@Configuration`â€™ ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì„¤ì •(êµ¬ì„±)ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.
    - ì—¬ê¸°ì„œ â€˜`@Bean`â€™ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆ ì´ë¼ê³  í•œë‹¤.
    - ìŠ¤í”„ë§ ë¹ˆ ì€ â€˜@Beanâ€™ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
        - ì‚¬ìš©ì€ â€˜`ac.getBean(â€nameâ€, class)`í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©
