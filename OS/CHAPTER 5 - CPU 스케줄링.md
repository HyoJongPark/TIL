# CHAPTER 5 - CPU 스케줄링

## 1. 기본 개념_Basic Concepts

다중 프로그래밍의 목적은 CPU 이용률을 최대화하기 위해 항상 실행 중인 프로세스를 가지게 하는 데 있다.

### 1.1 CPU-I/O 버스트 사이클_CPU-I/O Burst Cycle

<img width="296" alt="Untitled" src="https://user-images.githubusercontent.com/75190035/174474001-780a33d0-e093-4d70-adef-676eadbca60f.png">

- 프로세스 실행은 CPU 실행과 I/O 대기의 사이클로 구성된다. 프로세스들은 이들 두 상태 사이를 교대로 왔다 갔다 한다.
- 프로세스 실행은 CPU 버스트로 시작되고, 뒤이어 I/O 버스트가 발생한다. 그 뒤로 이 사이클이 반복된다.
- 마지막 CPU 버스트는 I/O 버스트가 뒤따르는 대신, 실행을 종료하기 위한 시스템 요청과 함께 끝난다.

### 1.2 CPU 스케줄러_CPU Scheduler

- CPU가 유휴 상태가 될 때마다, 운영체제는 준비 큐에 있는 프로세스 중에서 하나를 선택해 실행해야 한다.
- 이때, 선택 절차가 CPU 스케줄러에 의해 실행된다.
- 스케줄러는 실행 준비 되어 있는 메모리 내의 프로세스 중 하나를 선택해 CPU를 할당한다.
    - 준비 큐는 FIFO 방식이 아니어도 된다.(선입선출 큐, 우선순위 큐 또는 단순히 순서가 없는 연결 리스트로 구현할 수 있다.)

### 1.3 선점 및 비선점 스케줄링_Preemptive and Nonpreemptive Scheduling

- CPU 스케줄링 결정은 다음 4 가지 상황에서 발생할 수 있다.
    1. 한 프로세스가 실행 상태에서 대기 상태로 전환될 때
    2. 프로세스가 실행 상태에서 준비 완료 상태로 전환될 때
    3. 프로세스가 대기 상태에서 준비 완료 상태로 전환될 때
    4. 프로세스가 종료할 때
- 상황 1과 4의 경우, 스케줄링 면에서는 선택의 여지가 없으며, 실행을 위해 새로운 프로세스가 반드시 선택되어야 한다. 상황 2와 3의 경우 선택의 여지가 있다.
- 상황 1, 4에서만 스케줄링이 발생할 경우, 우리는 이러한 스케줄링 방법을 비선점(nonpreemptive) 또는 협조적(cooperative)이라고 하고, 그렇지 않으면 선점(preemptive)이라고 한다.
- **비선점**
    - CPU가 한 프로세스에게 할당되면 프로세스가 종료하든지, 또는 대기 상태로 전환해 CPU를 방출할 때까지 점유한다.
- **선점**
    - 한 프로세스가 CPU를 할당받아 실행중이라도 다른 프로세스가 현재 프로세스를 중지 시키고 CPU를 강제적으로 뺏을 수 있다.
    - 데이터가 다수의 프로세스에 의해 공유될 때 경쟁 조건을 초래할 수 있다.

### 1.4 디스패처_DIspatcher

<img width="195" alt="Untitled 1" src="https://user-images.githubusercontent.com/75190035/174474008-c1c8d837-093b-471d-862d-d43fcf4a57cd.png">

- 디스패처는 CPU 코어의 제어를 CPU 스케줄러가 선택한 프로세스에 주는 모듈이며 다음과 같은 작업을 포함한다.
    - 한 프로세스에서 다른 프로세스로 문맥을 교환하는 일
    - 사용자 모드로 전환하는 일
    - 프로그램을 다시 시작하기 위해 사용자 프로그램의 적절한 위치로 이동(jump)하는 일
- 디스패처는 모든 프로세스의 문맥 교환 시 호출되므로, 가능한 최고로 빨리 수행되어야 한다.
- 디스패처가 하나의 프로세스를 정지하고 다른 프로세스의 수행을 시작하는 데까지 소요되는 시간을 디스패치 지연(dispatch latency)라고 한다.

---

## 2. 스케줄링 기준_Scheduling Criteria

CPU 스케줄링 알고리즘을 비교하기 위한 여러 기준

- CPU 이용률(utilization)
    - 가능한 한 CPU를 최대한 바쁘게 유지하기를 원한다.
    - 실제 시스템에서는 40%(부하가 적은 시스템의 경우)~90%(부하가 큰 시스템의 경우) 범위를 가져야 한다.
- 처리량(throughput)
    - 작업량 측정의 한 방법으로, 단위 시간당 완료된 프로세스의 개수를 처리량이라고 한다.
- 총 처리 시간(turnaround time)
    - 특정한 프로세스의 입장에서 중요한 기준은 그 프로세스를 실행하는 데 소요된 시간이다.
    - 프로세스의 제출 시간과 완료 시간의 간격을 총 처리 시간이라 한다.
    - 총 처리 시간은 준비 큐에서 대기한 시간, CPU에서 실행하는 시간, I/O 시간을 합한 시간이다.
- 대기 시간(waiting time)
    - CPU 스케줄링 알고리즘은 프로세스가 실행하거나 I/O을 하는 시간의 양에 영향을 미치지 않는다. 단지 프로세스가 준비 큐에서 대기하는 시간의 양에만 영향을 준다.
    - 준비 큐에서 대기하면서 보낸 시간의 합을 대기 시간이라 한다.
- 응답 시간(response time)
    - 대화식 시스템(interactive system)에서 총 처리 시간은 최선의 기준이 아닐 수 있다. 프로세스가 어떤 출력을 일찍 생성하고, 앞서의 결과가 출력되는 사이 새 결과를 얻으려고 연산을 계속하는 경우가 있다.
    - 하나의 요구를 제출한 후 첫 번째 응답이 나올 때까지의 시간을 응답 시간이라 한다.
    - 응답 시간은 응답이 시작되는 데까지 걸리는 시간이지, 그 응답을 출력하는 데 걸리는 시간은 아니다.

---

> 참고
> 
> - 책
> 
> [⌜Operating System Concepts 10th - Abraham Silberschatz, Peter B. Galvin, Greg Gagne⌟](http://www.yes24.com/Product/Goods/78225791)
> 
> - 블로그
> 
> [https://blog.naver.com/bisu1532/221617575362](https://blog.naver.com/bisu1532/221617575362)
> 
> [https://suhwanc.tistory.com/179?category=879656](https://suhwanc.tistory.com/179?category=879656)
>
